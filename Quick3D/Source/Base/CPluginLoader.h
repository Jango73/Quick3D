
#pragma once

#include "quick3d_global.h"

//-------------------------------------------------------------------------------------------------

#include "CSingleton.h"
#include "CPluginInterface.h"

//-------------------------------------------------------------------------------------------------
// OS defines

#ifdef WIN32
    #define LIBRARY_FILTER  "*.dll"
#else
    #define LIBRARY_FILTER  "*.so"
#endif

//-------------------------------------------------------------------------------------------------

class QUICK3D_EXPORT CPluginLoader : public CSingleton<CPluginLoader>
{
    friend class CSingleton<CPluginLoader>;

public:

    //-------------------------------------------------------------------------------------------------
    // Constructors and destructor
    //-------------------------------------------------------------------------------------------------

    //! Default constructor
    CPluginLoader();

    //-------------------------------------------------------------------------------------------------
    // Getters
    //-------------------------------------------------------------------------------------------------

    //!
    QString pluginPath() const;

    //-------------------------------------------------------------------------------------------------
    // Control methods
    //-------------------------------------------------------------------------------------------------

    //!
    void loadPlugins();

    //!
    void loadPlugin(const QString& sName);

protected:

    QString	m_sPluginPath;
};
