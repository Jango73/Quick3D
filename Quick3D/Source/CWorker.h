
#pragma once

#include "quick3d_global.h"

// Qt
#include <QThread>

//-------------------------------------------------------------------------------------------------

class QUICK3D_EXPORT CWorker : public QThread
{
    Q_OBJECT

public:

    //-------------------------------------------------------------------------------------------------
    // Constructors and destructor
    //-------------------------------------------------------------------------------------------------

    //! Default constructor
    CWorker();

    //! Destructor
    virtual ~CWorker();

    //-------------------------------------------------------------------------------------------------
    // Setters
    //-------------------------------------------------------------------------------------------------

    //-------------------------------------------------------------------------------------------------
    // Getters
    //-------------------------------------------------------------------------------------------------

    //! Retourne vrai si le travail a commencé
    bool isStarted() { return m_bStarted; }

    //! Retourne vrai si le travail est terminé
    bool isFinished() { return m_bFinished; }

    //-------------------------------------------------------------------------------------------------
    // Inherited methods
    //-------------------------------------------------------------------------------------------------

    //-------------------------------------------------------------------------------------------------
    // Control methods
    //-------------------------------------------------------------------------------------------------

    //! Méthode de travail
    virtual void work();

    //! Annule le travail de l'objet
    void abort();

    //! Exécute un sleep
    void doSleep(int ms);

    //-------------------------------------------------------------------------------------------------
    // Inherited methods protégées
    //-------------------------------------------------------------------------------------------------

protected:

    //! Implémentation de la méthode run() de QThread
    virtual void run();

    //-------------------------------------------------------------------------------------------------
    // Properties
    //-------------------------------------------------------------------------------------------------

protected:

    bool        m_bStopRequested;   // Indique si l'arrêt du travail est demandé

private:

    bool        m_bStarted;         // Indique si le travail a commencé
    bool        m_bFinished;        // Indique si le travail est terminé
};
